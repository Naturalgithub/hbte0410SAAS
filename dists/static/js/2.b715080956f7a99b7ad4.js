webpackJsonp([2],{BO1k:function(e,t,s){e.exports={default:s("fxRn"),__esModule:!0}},fxRn:function(e,t,s){s("+tPU"),s("zQR9"),e.exports=s("g8Ux")},g8Ux:function(e,t,s){var i=s("77Pl"),o=s("3fs2");e.exports=s("FeBl").getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},l3Hd:function(e,t){},l605:function(e,t,s){"use strict";var i={name:"dateTemplate",data:function(){return{pickDate:[]}},methods:{search:function(e){null==this.pickDate&&(this.pickDate=["",""]),this.$emit("searchTime",this.pickDate[0],this.pickDate[1])}}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-form",[s("el-form-item",[s("el-date-picker",{staticStyle:{width:"70%"},attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd",clearable:""},on:{change:e.search},model:{value:e.pickDate,callback:function(t){e.pickDate=t},expression:"pickDate"}})],1)],1)},staticRenderFns:[]},n=s("VU/8")(i,o,!1,null,null,null);t.a=n.exports},t6XS:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("BO1k"),o=s.n(i),n=s("Xxa5"),a=s.n(n),r=s("exGp"),l=s.n(r),u=s("5Wkb"),m=s("SJyd"),p=s("l605"),d={name:"departmentQuestions",components:{"v-table":u.a,"v-pagination":m.a,"v-date":p.a},data:function(){var e=this;return{cols:[{name:"title",label:"题目",ifshow:!0,clickFunc:function(t){e.displayQuestionItem(t)}},{name:"department",label:"部门",width:"180"},{name:"type",label:"类型",width:"180"},{name:"purpose",label:"用途",width:"180"},{name:"date",label:"日期",width:"180"}],lastCol:{ifshow:!0,operates:[{name:"编辑",type:"primary",clickFunc:function(t,s){e.updateQuestionItem(t,s)}},{name:"删除",type:"primary",clickFunc:function(t,s){e.deleteQuestionItem(t,s)}}]},tableData:[],total:0,page:1,pageSize:50,questionsType:[{name:"单选题",value:"1"},{name:"多选题",value:"2"},{name:"判断题",value:"3"},{name:"填空题",value:"4"},{name:"问答题",value:"5"}],questionsPurpose:[{name:"考试",value:"0"},{name:"调研",value:"1"}],rules:{questionName:[{required:!0,message:"请输入题目名称",trigger:["blur","change"]}],questionsType:[{required:!0,message:"请选择题目的类型",trigger:"change"}],questionsPurpose:[{required:!0,message:"请选择题目的用途",trigger:"change"}]},detail:"",title:"添加题目",adddialogVisible:!1,detaildialogVisible:!1,questionForm:{name:"",type:"",purpose:"",id:"",user:{id:""},questionAnswer:""},questionDefaultContent:"请输入问题的答案！\n单选题：直接输入选项，如：A。\n多选题：答案以‘;’分割，如A;B。\n判断题：答案以1或0表示，1：正确，0：错误。\n填空题：多个空之间以‘;’分割，如xxx;xxx。\n问答题：直接输入答案。",questionItems:{items:[]},letters:"ABCDEFGHIGKLMNOPQRSTUVWXYZ",questionItemsShow:!1,questionAnswerShow:!0,user:{id:JSON.parse(localStorage.getItem("data")).id,name:JSON.parse(localStorage.getItem("data")).userName},radioItems:""}},created:function(){this.getQuestions()},methods:{addQuestions:function(){this.title="添加题目",this.questionForm.name="",this.questionForm.type="",this.questionForm.purpose="",this.questionItems.items=[],this.questionForm.questionAnswer="",this.questionItemsShow=!1,this.questionAnswerShow=!0,this.adddialogVisible=!0},displayQuestionItem:function(e){for(var t in this.detaildialogVisible=!0,this.title=e.purpose+":"+e.type,this.questionForm.name=e.title,this.radioItems=e.result,this.questionForm.type=e.typeIndex,this.questionItems.items=[],e.items)this.questionItems.items.push({key:new Date,title:e.items[t].title,orderNo:e.items[t].orderNo});1==this.questionForm.type?this.radioItems=e.result:2==this.questionForm.type?this.radioItems=e.result.split(";"):3==this.questionForm.type?(this.questionItems.items=[{title:"正确"},{title:"错误"}],this.radioItems=1==e.result?"正确":"错误"):this.questionForm.questionAnswer=e.result},submitQuestion:function(){var e=this;return l()(a.a.mark(function t(){var s,i,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(i in e.adddialogVisible=!1,s=[],e.questionItems.items)s.push({title:e.questionItems.items[i].title,orderNo:i});return s={id:e.id,user:{id:e.user.id},type:e.questionForm.purpose,itemType:e.questionForm.type,title:e.questionForm.name,status:1,examOptions:s,result:e.questionForm.questionAnswer},o="添加题目"==e.title?e.$http.addExamQuestion:e.$http.updateExamQuestion,t.next=7,o(s);case 7:e.getQuestions();case 8:case"end":return t.stop()}},t,e)}))()},questionPurposeChanged:function(e){this.questionAnswerShow=0==e},questionTypeChanged:function(e){if(1==e||2==e){this.questionItemsShow=!0,this.questionItems.items=[];for(var t=0;t<4;t++)this.addQuestionItem()}else this.questionItemsShow=!1},removeItem:function(e){var t=this.questionItems.items.indexOf(e);-1!==t&&this.questionItems.items.splice(t,1)},addQuestionItem:function(){this.questionItems.items.push({key:new Date,title:""})},deleteQuestionItem:function(e,t){var s=this;return l()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.$http.deleteExamQuestion({id:t.id});case 2:s.getQuestions();case 3:case"end":return e.stop()}},e,s)}))()},updateQuestionItem:function(e,t){for(var s in this.title="修改题目",this.questionForm.name=t.title,this.questionForm.type=""+t.typeIndex,this.questionForm.purpose=t.purposeIndex,this.questionPurposeChanged(this.questionForm.purpose),this.questionTypeChanged(this.questionForm.type),this.id=t.id,this.questionForm.questionAnswer=t.result,this.questionItems.items=[],t.items)this.questionItems.items.push({key:new Date,title:t.items[s].title,orderNo:t.items[s].title});this.adddialogVisible=!0},searchTime:function(e,t){this.getQuestions(e,t)},pageSizeChanged:function(e,t){},getQuestions:function(e,t){var s=this;return l()(a.a.mark(function i(){var n,r,l,u,m,p,d;return a.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,s.$http.getExamQuestions({userId:s.user.id,page:s.page,pageSize:s.pageSize,startTime:e,endTime:t});case 2:for(n=i.sent,s.tableData=[],r=!0,l=!1,u=void 0,i.prev=7,m=o()(n.result);!(r=(p=m.next()).done);r=!0)d=p.value,s.tableData.push({id:d.id,title:d.title,department:d.department.name,purpose:1==d.type?"调研":"考试",purposeIndex:""+d.type,type:s.questionsType[d.itemType-1].name,typeIndex:""+d.itemType,date:d.createTime,items:d.examOptions,result:d.result});i.next=15;break;case 11:i.prev=11,i.t0=i.catch(7),l=!0,u=i.t0;case 15:i.prev=15,i.prev=16,!r&&m.return&&m.return();case 18:if(i.prev=18,!l){i.next=21;break}throw u;case 21:return i.finish(18);case 22:return i.finish(15);case 23:s.total=n.count;case 24:case"end":return i.stop()}},i,s,[[7,11,15,23],[16,,18,22]])}))()}}},c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-row",[s("el-col",{attrs:{span:2}},[s("el-button",{attrs:{type:"success"},on:{click:e.addQuestions}},[e._v("添加")])],1),e._v(" "),s("el-col",{attrs:{span:6}},[s("v-date",{on:{searchTime:e.searchTime}})],1)],1),e._v(" "),s("v-table",{attrs:{cols:e.cols,lastCol:e.lastCol,tableData:e.tableData}}),e._v(" "),s("v-pagination",{attrs:{page:e.page,pageSize:e.pageSize,total:e.total},on:{pageSizeChanged:e.pageSizeChanged}}),e._v(" "),s("el-dialog",{attrs:{title:e.title,visible:e.adddialogVisible,width:"50%","close-on-click-modal":!1},on:{"update:visible":function(t){e.adddialogVisible=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[s("span",{staticClass:"dialog-footer"},[s("el-button",{on:{click:function(t){e.adddialogVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.submitQuestion}},[e._v("确 定")])],1)]},proxy:!0}])},[s("el-form",{ref:"questionForm",attrs:{rules:e.rules,model:e.questionForm,"status-icon":""}},[s("el-form-item",{attrs:{prop:"type"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择题目的类型",clearable:""},on:{change:e.questionTypeChanged},model:{value:e.questionForm.type,callback:function(t){e.$set(e.questionForm,"type",t)},expression:"questionForm.type"}},e._l(e.questionsType,function(e,t){return s("el-option",{key:t,attrs:{label:e.name,value:e.value}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{prop:"purpose"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择题目的用途",clearable:""},on:{change:e.questionPurposeChanged},model:{value:e.questionForm.purpose,callback:function(t){e.$set(e.questionForm,"purpose",t)},expression:"questionForm.purpose"}},e._l(e.questionsPurpose,function(e,t){return s("el-option",{key:t,attrs:{label:e.name,value:e.value}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{prop:"name"}},[s("el-input",{attrs:{placeholder:"题目名称（如果是填空题，请以‘_'代表一个空）"},model:{value:e.questionForm.name,callback:function(t){e.$set(e.questionForm,"name",t)},expression:"questionForm.name"}})],1)],1),e._v(" "),e.questionItemsShow?s("el-container",[s("el-header",[e._v("添加选项")]),e._v(" "),s("el-main",[s("el-form",{ref:"questionItems",attrs:{rules:e.rules,model:e.questionItems,"status-icon":"","label-width":"50px"}},[e._l(e.questionItems.items,function(t,i){return s("el-form-item",{key:t.key+i,attrs:{label:e.letters[i],prop:"items."+i+".title",rules:{required:!0,message:"选项不能为空",trigger:"blur"}}},[s("el-row",[s("el-col",{attrs:{span:20}},[s("el-input",{model:{value:t.title,callback:function(s){e.$set(t,"title",s)},expression:"item.title"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-delete"},on:{click:function(s){return s.preventDefault(),e.removeItem(t)}}})],1)],1)],1)}),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.addQuestionItem}},[e._v("添加选项")])],1)],2)],1)],1):e._e(),e._v(" "),s("el-form",{directives:[{name:"show",rawName:"v-show",value:e.questionAnswerShow,expression:"questionAnswerShow"}],ref:"questionForm",attrs:{rules:e.rules,model:e.questionForm,"status-icon":""}},[s("el-form-item",{attrs:{prop:"questionAnswer"}},[s("el-input",{attrs:{type:"textarea",rows:6,placeholder:e.questionDefaultContent},model:{value:e.questionForm.questionAnswer,callback:function(t){e.$set(e.questionForm,"questionAnswer",t)},expression:"questionForm.questionAnswer"}})],1)],1)],1),e._v(" "),s("el-dialog",{attrs:{title:e.title,visible:e.detaildialogVisible,width:"50%"},on:{"update:visible":function(t){e.detaildialogVisible=t}}},[s("div",[s("h3",[e._v(e._s(e.questionForm.name))]),e._v(" "),s("el-divider")],1),e._v(" "),1==e.questionForm.type?s("el-form",{attrs:{disabled:""}},[s("el-radio-group",{model:{value:e.radioItems,callback:function(t){e.radioItems=t},expression:"radioItems"}},e._l(e.questionItems.items,function(t,i){return s("el-form-item",{key:i,staticStyle:{"margin-bottom":"0px"}},[s("label",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(e.letters[t.orderNo]))]),e._v(" "),s("el-radio",{attrs:{label:e.letters[t.orderNo]}},[e._v(e._s(t.title))])],1)}),1)],1):2==e.questionForm.type?s("el-form",{attrs:{disabled:""}},[s("el-checkbox-group",{model:{value:e.radioItems,callback:function(t){e.radioItems=t},expression:"radioItems"}},e._l(e.questionItems.items,function(t,i){return s("el-form-item",{key:i,staticStyle:{"margin-bottom":"0px"}},[s("label",{staticStyle:{"margin-right":"10px"}},[e._v(e._s(e.letters[t.orderNo]))]),e._v(" "),s("el-checkbox",{attrs:{label:e.letters[t.orderNo]}},[e._v(e._s(t.title))])],1)}),1)],1):3==e.questionForm.type?s("div",[s("el-radio-group",{attrs:{disabled:""},model:{value:e.radioItems,callback:function(t){e.radioItems=t},expression:"radioItems"}},e._l(e.questionItems.items,function(t,i){return s("el-radio",{key:i,attrs:{label:t.title}},[e._v(e._s(t.title))])}),1)],1):s("div",[s("span",[e._v(e._s(e.questionForm.questionAnswer))])])],1)],1)},staticRenderFns:[]};var h=s("VU/8")(d,c,!1,function(e){s("l3Hd")},null,null);t.default=h.exports}});
//# sourceMappingURL=2.b715080956f7a99b7ad4.js.map