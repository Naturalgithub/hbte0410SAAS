webpackJsonp([19],{"5sZy":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("Xxa5"),a=n.n(s),i=n("exGp"),r=n.n(i),o={data:function(){return{outuserId:"",loginId:JSON.parse(localStorage.getItem("data")).id,forumId:"",responsecontent1:"",responsecontent2:"",bttitle:"",innerVisiblecontent1:!1,innerVisiblecontent2:!1,selfavatar:JSON.parse(localStorage.getItem("data")).avatar,datetime:"",problemTypeInfoslist:[],problemTypeInfos:{id:""},startTime:"",endTime:"",timeValue:[],inputValue:[],fmTaglist:[],content:"",responsedialog:{user:{name:name}},dialogVisible:!1,total:0,page:1,pageSize:50,item1:{},item2:{},testobj:{name:2},fmTagNameid:"",forumList:[],commentlist:[]}},created:function(){this.getcommentlist(),this.getForumList(),this.getfmTaglist(),this.getproblemTypeInfoslist();var t=this.$hbteApi.nowTime();this.datetime=t.nowYear+"-"+t.nowMonth+"-"+t.nowDate+" "+t.nowHours+":"+t.nowMinutess},methods:{acceptitem1:function(t){var e=this;return r()(a.a.mark(function n(){var s;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$http.commentlistaccept({id:t.id,accept:1});case 2:0==(s=n.sent).code?(e.$message.success("操作成功"),e.getcommentlist()):e.$message.error(s.message);case 4:case"end":return n.stop()}},n,e)}))()},acceptitem2:function(t){var e=this;return r()(a.a.mark(function n(){var s;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$http.commentlistaccept({id:t.id,accept:1});case 2:0==(s=n.sent).code?(e.$message.success("操作成功"),e.getcommentlist()):e.$message.error(s.message);case 4:case"end":return n.stop()}},n,e)}))()},delitem1:function(t){var e=this;return r()(a.a.mark(function n(){var s;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$http.commentlistdelete({id:t.id});case 2:s=n.sent,e.getcommentlist(),0==s.code&&e.$message.success("删除成功");case 5:case"end":return n.stop()}},n,e)}))()},delitem2:function(t){var e=this;return r()(a.a.mark(function n(){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$http.commentlistdelete({id:t.id});case 2:0==n.sent.code&&(e.$message.success("删除成功"),e.getcommentlist());case 4:case"end":return n.stop()}},n,e)}))()},titlechange:function(){this.getForumList()},innerVisiblecontent2add:function(){var t=this;return r()(a.a.mark(function e(){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.commentadd({content:t.responsecontent2,parentId:t.item2.parentId,user:{id:t.loginId},forumId:t.forumId,datetime:t.datetime});case 2:0==(n=e.sent).code?(t.$message.success("回复成功"),t.getcommentlist(),t.responsecontent2="",t.innerVisiblecontent2=!1):t.$message.error(n.message);case 4:case"end":return e.stop()}},e,t)}))()},innerVisiblecontent1add:function(){var t=this;return r()(a.a.mark(function e(){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.commentadd({content:t.responsecontent1,parentId:t.item1.id,user:{id:t.loginId},forumId:t.forumId,datetime:t.datetime});case 2:0==(n=e.sent).code?(t.$message.success("回复成功"),t.getcommentlist(),t.responsecontent1="",t.innerVisiblecontent1=!1):t.$message.error(n.message);case 4:case"end":return e.stop()}},e,t)}))()},response:function(t){this.item1=t,this.innerVisiblecontent1=!0},response2:function(t){this.item2=t,this.innerVisiblecontent2=!0},sentcontent:function(t){var e=this;return r()(a.a.mark(function n(){var s;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$http.commentadd({datetime:e.datetime,user:{id:JSON.parse(localStorage.getItem("data")).id},forumId:t,content:e.content});case 2:0==(s=n.sent).code?(e.$message.success("发表成功"),e.content="",e.showdialog(),e.getcommentlist()):e.$message.error(s.message);case 4:case"end":return n.stop()}},n,e)}))()},getcommentlist:function(t){var e=this;return r()(a.a.mark(function n(){var s;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return void 0==t&&(t=e.$store.state.forumId),n.next=3,e.$http.commentlist({forumId:t});case 3:s=n.sent,e.commentlist=s.result;case 5:case"end":return n.stop()}},n,e)}))()},showdialog:function(t){var e=this;return r()(a.a.mark(function n(){var s;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.$store.state.forumId=t.id,e.forumId=t.id,e.outuserId=t.user.id,n.next=6,e.$http.commentlist({forumId:t.id});case 6:s=n.sent,e.commentlist=s.result,e.responsedialog=t,e.dialogVisible=!0;case 11:case"end":return n.stop()}},n,e)}))()},clickproblemType:function(){this.getForumList()},getproblemTypeInfoslist:function(){var t=this;return r()(a.a.mark(function e(){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.problemTypelist();case 2:n=e.sent,t.problemTypeInfoslist=n.result;case 4:case"end":return e.stop()}},e,t)}))()},searchTime:function(t){if(null==t)return this.startTime="",this.endTime="",void this.getForumList();this.startTime=t[0],this.endTime=t[1],this.getForumList()},getfmTaglist:function(){var t=this;return r()(a.a.mark(function e(){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.fmTaglist();case 2:n=e.sent,t.fmTaglist=n.result;case 4:case"end":return e.stop()}},e,t)}))()},handleClose:function(t){var e=this;this.$confirm("确认关闭？").then(function(n){t(),e.content=""}).catch(function(t){})},getForumList:function(){var t=this;return r()(a.a.mark(function e(){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.forumList({page:t.page,pageSize:t.pageSize,userId:t.ids,problemTypeId:t.problemTypeInfos.id,title:t.bttitle,fmTagId:t.fmTagNameid,startTime:t.startTime,endTime:t.endTime});case 2:n=e.sent,t.forumList=n.result,t.total=n.result.length;case 6:case"end":return e.stop()}},e,t)}))()},handleSizeChange:function(t){this.pageSize=t,this.page=1,this.getForumList()},handleCurrentChange:function(t){this.page=t,this.getForumList()}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"forumIndex"},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-row",[n("el-col",{attrs:{span:6}},[n("el-form-item",{staticStyle:{width:"70%"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:t.searchTime},model:{value:t.timeValue,callback:function(e){t.timeValue=e},expression:"timeValue"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",[n("el-select",{staticStyle:{width:"80%"},attrs:{clearable:"",placeholder:"请选择标签"},on:{change:t.clickproblemType},model:{value:t.fmTagNameid,callback:function(e){t.fmTagNameid=e},expression:"fmTagNameid"}},t._l(t.fmTaglist,function(t){return n("el-option",{key:t.id,attrs:{label:t.fmTagName,value:t.id}})}),1)],1)],1),t._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",[n("el-select",{staticStyle:{width:"90%"},attrs:{clearable:"",placeholder:"请选择问题类型"},on:{change:t.clickproblemType},model:{value:t.problemTypeInfos.id,callback:function(e){t.$set(t.problemTypeInfos,"id",e)},expression:"problemTypeInfos.id"}},t._l(t.problemTypeInfoslist,function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1),t._v(" "),n("el-col",{attrs:{span:6}},[n("el-form-item",[n("el-input",{staticStyle:{width:"80%"},attrs:{placeholder:"标题",lg:12},nativeOn:{keyup:function(e){return t.titlechange(e)}},model:{value:t.bttitle,callback:function(e){t.bttitle=e},expression:"bttitle"}})],1)],1)],1)],1),t._v(" "),n("el-table",{attrs:{data:t.forumList,border:"",size:"mini"}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[n("el-link",{attrs:{type:"primary"},domProps:{innerHTML:t._s(s.title)},on:{click:function(e){return t.showdialog(s)}}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"标签",width:"150",size:"mini"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return t._l(s.fmTags,function(e){return n("el-tag",{key:e.id,attrs:{size:"mini"}},[t._v(t._s(e.fmTagName))])})}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?n("span",[t._v("已解决")]):n("span",[t._v("待解决")])]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"userName",label:"提问人",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"user.name",label:"提交人",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"problemTypeInfo.name",label:"问题类型",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{prop:"datatime",label:"时间",width:"100"}})],1),t._v(" "),n("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{background:"","current-page":t.page,"page-sizes":[30,50,80],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),n("el-dialog",{attrs:{title:"详情",visible:t.dialogVisible,top:"10vh",width:"70%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("div",{staticClass:"main"},[n("h2",[t._v(t._s(t.responsedialog.title))]),t._v(" "),n("p",[n("span",{staticClass:"span1"},[t._v(t._s(t.responsedialog.user.name))]),t._v(" "),n("span",[t._v("最后发布于")]),t._v(" "),n("span",{staticStyle:{"font-size":"12px"}},[t._v(t._s(t.responsedialog.datatime))])]),t._v(" "),n("div",{staticClass:"content"},[n("div",{domProps:{innerHTML:t._s(t.responsedialog.content)}})]),t._v(" "),n("div",{staticClass:"foot"},[n("div",{staticClass:"footcontent"},[n("div",{staticClass:"img"},[n("img",{attrs:{src:t.selfavatar,alt:""}})]),t._v(" "),n("div",[n("el-input",{attrs:{type:"textarea",width:"100%;",placeholder:"想对同事说点什么?"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),t._v(" "),n("el-button",{staticClass:"fr",staticStyle:{"margin-top":"3px"},attrs:{type:"sccuss",size:"mini"},on:{click:function(e){return t.sentcontent(t.responsedialog.id)}}},[t._v("发送")])],1)]),t._v(" "),n("div",{staticClass:"foottwo"},[n("ul",t._l(t.commentlist,function(e){return n("li",{key:e.id,staticStyle:{"padding-top":"10px"}},[n("div",{staticClass:"foottwoimg"},[n("img",{attrs:{src:e.user.avatar,alt:""}}),t._v(" "),n("span",{staticClass:"f700"},[t._v(t._s(e.user.name))]),t._v(" "),n("span",{staticClass:"font12"},[t._v(t._s(e.datetime))]),t._v(" "),n("p",[n("span",{staticClass:"pading200",staticStyle:{"font-size":"14px"}},[t._v("     "+t._s(e.content))]),t._v(" "),n("span",{staticStyle:{}},[n("span",[n("el-link",{attrs:{type:"primary"},on:{click:function(n){return t.response(e)}}},[t._v("回复")])],1),t._v(" "),n("span",[t.outuserId==t.loginId?n("span",[t._v("\n                       |\n                      "),n("el-link",{attrs:{type:"primary"},on:{click:function(n){return t.acceptitem1(e)}}},[t._v("采纳")])],1):t._e()]),t._v(" "),n("span",[e.user.id==t.loginId?n("span",[t._v("\n                       |\n                      "),n("el-link",{attrs:{type:"danger"},on:{click:function(n){return t.delitem1(e)}}},[t._v("删除")])],1):t._e()]),t._v(" "),1==e.accept?n("span",{staticStyle:{"font-weight":"700","font-size":"14px","padding-top":"3px"}},[t._v("    已采纳")]):t._e()])]),t._v(" "),n("ul",{staticStyle:{"padding-left":"20px","padding-bottom":"20px"}},t._l(e.children,function(e){return n("li",{key:e.id,staticStyle:{"padding-top":"10px","padding-bottom":"10px"}},[n("div",{staticClass:"foottwoimg"},[n("img",{attrs:{src:e.user.avatar,alt:""}}),t._v(" "),n("span",{staticClass:"f700"},[t._v(t._s(e.user.name))]),t._v(" "),n("span",{staticClass:"font12"},[t._v(t._s(e.datetime))]),t._v("\n                           \n                    "),n("span",{staticClass:"pading200"},[t._v(t._s(e.content))]),t._v(" "),n("span",[n("span",[n("el-link",{attrs:{type:"primary"},on:{click:function(n){return t.response2(e)}}},[t._v("回复")])],1),t._v(" "),n("span",[t.outuserId==t.loginId?n("span",[t._v("\n                           |\n                          "),n("el-link",{attrs:{type:"primary"},on:{click:function(n){return t.acceptitem2(e)}}},[t._v("采纳")])],1):t._e()]),t._v(" "),n("span",[e.user.id==t.loginId?n("span",[t._v("\n                           |\n                          "),n("el-link",{attrs:{type:"danger"},on:{click:function(n){return t.delitem2(e)}}},[t._v("删除")])],1):t._e(),t._v(" "),1==e.accept?n("span",{staticStyle:{"font-weight":"700","font-size":"14px","padding-top":"3px"}},[t._v("    已采纳")]):t._e()])])])])}),0)])])}),0)])]),t._v(" "),n("div",{staticClass:"test"}),t._v(" "),n("el-dialog",{attrs:{width:"30%",title:"回复",visible:t.innerVisiblecontent1,"append-to-body":""},on:{"update:visible":function(e){t.innerVisiblecontent1=e}}},[n("el-form",{attrs:{"label-width":"50px"}},[n("el-form-item",{attrs:{label:"内容"}},[n("el-input",{attrs:{placeholder:"请输入回复内容",lg:12,type:"textarea",autosize:{minRows:4,maxRows:6}},model:{value:t.responsecontent1,callback:function(e){t.responsecontent1=e},expression:"responsecontent1"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.innerVisiblecontent1add}},[t._v("确 定")])],1)],1),t._v(" "),n("el-dialog",{attrs:{width:"30%",title:"回复",visible:t.innerVisiblecontent2,"append-to-body":""},on:{"update:visible":function(e){t.innerVisiblecontent2=e}}},[n("el-form",{attrs:{"label-width":"50px"}},[n("el-form-item",{attrs:{label:"内容"}},[n("el-input",{attrs:{placeholder:"请输入回复内容",lg:12,type:"textarea",autosize:{minRows:4,maxRows:6}},model:{value:t.responsecontent2,callback:function(e){t.responsecontent2=e},expression:"responsecontent2"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.innerVisiblecontent2add}},[t._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var c=n("VU/8")(o,l,!1,function(t){n("u0zX")},"data-v-69b2a95c",null);e.default=c.exports},u0zX:function(t,e){}});
//# sourceMappingURL=19.958fdf883b76872cf918.js.map