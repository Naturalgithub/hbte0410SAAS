webpackJsonp([7],{g3to:function(e,t){},hayN:function(e,t){},m3Kg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Xxa5"),r=a.n(i),n=a("exGp"),s=a.n(n),o={data:function(){return{bttitle:"",fmTagNameid:"",problemTypeInfoslist:[],problemTypeInfos:{id:""},startTime:"",endTime:"",timeValue:[],inputValue:[],inputVisible:!1,dynamicTags:[],testobj:{name:2},title:"",problemTypeList:[],rules:{title:[{required:!0,message:"请输入正确数据",trigger:["blur","change"]}],content:[{required:!0,message:"请输入正确数据",trigger:["blur","change"]}],userName:[{required:!0,message:"请输入正确数据",trigger:["blur","change"]}]},fmTaglist:[],editForm:{forumTagIds:[],forumTagNames:[],id:"",userName:"",title:"",datatime:"",content:"",user:{id:JSON.parse(localStorage.getItem("data")).id,name:JSON.parse(localStorage.getItem("data")).userName},problemTypeInfo:{id:""}},adddialog:!1,testList:[],total:0,page:1,pageSize:50,forumList:[]}},created:function(){var e=this;this.getfmTaglist(),this.getproblemTypeList(),this.getForumList();var t=this.$hbteApi.nowTime();this.$nextTick(function(){e.editForm.datatime=t.nowYear+"-"+t.nowMonth+"-"+t.nowDate})},methods:{titlechange:function(){this.getForumList()},searchTime:function(e){if(null==e)return this.startTime="",this.endTime="",void this.getForumList();this.startTime=e[0],this.endTime=e[1],this.getForumList()},clickproblemType:function(){this.getForumList()},getproblemTypeInfoslist:function(){var e=this;return s()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.problemTypelist();case 2:a=t.sent,e.problemTypeInfoslist=a.result;case 4:case"end":return t.stop()}},t,e)}))()},getfmTaglist:function(){var e=this;return s()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.fmTaglist();case 2:a=t.sent,e.fmTaglist=a.result;case 4:case"end":return t.stop()}},t,e)}))()},handleInputConfirm:function(){var e=this.inputValue;e&&this.dynamicTags.push(e),this.inputVisible=!1,this.inputValue="",this.editForm.forumTagNames=this.dynamicTags},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick(function(t){e.$refs.saveTagInput.$refs.input.focus()}),this.editForm.forumTagNames=this.dynamicTags},delbtn:function(e){var t=this;return s()(r.a.mark(function a(){var i;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$confirm("亲, 你确认要删除么?","温馨提示",{type:"warning"});case 3:return a.next=5,t.$http.forumdelete({id:e.id});case 5:0==(i=a.sent).code?t.$message({type:"success",message:"删除成功!"}):t.$message.error(i.errorMsg),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(0);case 12:t.getForumList();case 13:case"end":return a.stop()}},a,t,[[0,9]])}))()},editBtn:function(e){this.title="编辑",this.editForm.content=e.content,this.editForm.title=e.title,this.editForm.userName=e.userName,this.editForm.id=e.id,this.inputValue=[],this.editForm.problemTypeInfo.id=e.problemTypeInfo.id,this.adddialog=!0},sureAdd:function(){var e=this;return s()(r.a.mark(function t(){var a,i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!("添加"==e.title)){t.next=9;break}return t.next=5,e.$http.forumadd(e.editForm);case 5:0==(a=t.sent).code?(e.$message.success("提交成功"),e.getForumList(),e.adddialog=!1):e.$message.error(a.message),t.next=13;break;case 9:return t.next=11,e.$http.forumupdate(e.editForm);case 11:0==(i=t.sent).code?(e.$message.success("提交成功"),e.getForumList(),e.adddialog=!1):e.$message.error(i.message);case 13:case"end":return t.stop()}},t,e)}))()},getproblemTypeList:function(){var e=this;return s()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.problemTypeList();case 2:a=t.sent,e.problemTypeList=a.result;case 4:case"end":return t.stop()}},t,e)}))()},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},showadddialog:function(){this.title="添加",this.adddialog=!0,this.editForm.content="",this.editForm.title="",this.editForm.userName="",this.editForm.id="",this.editForm.problemTypeInfo.id="",this.editForm.forumTagIds=[],this.editForm.forumTagNames=[],this.inputValue=[]},getForumList:function(){var e=this;return s()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.forumList({page:e.page,pageSize:e.pageSize,userId:JSON.parse(localStorage.getItem("data")).id,problemTypeId:e.problemTypeInfos.id,title:e.bttitle,fmTagId:e.fmTagNameid,startTime:e.startTime,endTime:e.endTime});case 2:a=t.sent,e.forumList=a.result,e.total=a.result.length;case 6:case"end":return t.stop()}},t,e)}))()},handleSizeChange:function(e){this.pageSize=e,this.page=1,this.getForumList()},handleCurrentChange:function(e){this.page=e,this.getForumList()},handleCloses:function(e){this.dynamicTags.splice(this.dynamicTags.indexOf(e),1),this.upForm.tagNames=this.dynamicTags}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"postForum"},[a("el-button",{staticClass:"addBtn",attrs:{type:"success"},on:{click:e.showadddialog}},[e._v("添加")]),e._v(" "),a("el-form",{staticClass:"demo-form-inline",staticStyle:{"margin-top":"20px"},attrs:{inline:!0}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticStyle:{width:"70%"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:e.searchTime},model:{value:e.timeValue,callback:function(t){e.timeValue=t},expression:"timeValue"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",[a("el-select",{staticStyle:{width:"80%"},attrs:{clearable:"",placeholder:"请选择标签"},on:{change:e.clickproblemType},model:{value:e.fmTagNameid,callback:function(t){e.fmTagNameid=t},expression:"fmTagNameid"}},e._l(e.fmTaglist,function(e){return a("el-option",{key:e.id,attrs:{label:e.fmTagName,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",[a("el-select",{staticStyle:{width:"80%"},attrs:{clearable:"",placeholder:"请选择问题类型"},on:{change:e.clickproblemType},model:{value:e.problemTypeInfos.id,callback:function(t){e.$set(e.problemTypeInfos,"id",t)},expression:"problemTypeInfos.id"}},e._l(e.problemTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入标题",lg:12},nativeOn:{keyup:function(t){return e.titlechange(t)}},model:{value:e.bttitle,callback:function(t){e.bttitle=t},expression:"bttitle"}})],1)],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{"margin-top":"0px"},attrs:{data:e.forumList,border:"",size:"mini"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),e._v(" "),a("el-table-column",{attrs:{label:"标签",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return e._l(i.fmTags,function(t){return a("el-tag",{key:t.id,attrs:{size:"mini"}},[e._v(e._s(t.fmTagName))])})}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("span",[e._v("已解决")]):a("span",[e._v("待解决")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"提问人",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user.name",label:"提交人",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"problemTypeInfo.name",label:"问题类型",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"datatime",label:"时间",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"problemTypeInfo.name",label:"编辑",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-button",{attrs:{plain:"",size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(t){return e.editBtn(i)}}}),e._v(" "),a("el-button",{attrs:{plain:"",size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.delbtn(i)}}})]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{background:"","current-page":e.page,"page-sizes":[30,50,80],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.adddialog,top:"10vh",width:"80%","before-close":e.handleClose},on:{"update:visible":function(t){e.adddialog=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.rules}},[a("el-form-item",{attrs:{prop:"title"}},[a("el-input",{attrs:{placeholder:"请填入标题"},model:{value:e.editForm.title,callback:function(t){e.$set(e.editForm,"title",t)},expression:"editForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"content"}},[a("quill-editor",{attrs:{small:""},model:{value:e.editForm.content,callback:function(t){e.$set(e.editForm,"content",t)},expression:"editForm.content"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"userName"}},[a("el-input",{attrs:{placeholder:"请填入提问人"},model:{value:e.editForm.userName,callback:function(t){e.$set(e.editForm,"userName",t)},expression:"editForm.userName"}})],1),e._v(" "),a("el-form-item",[a("el-select",{attrs:{placeholder:"请填入问题类型"},model:{value:e.editForm.problemTypeInfo.id,callback:function(t){e.$set(e.editForm.problemTypeInfo,"id",t)},expression:"editForm.problemTypeInfo.id"}},e._l(e.problemTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"选择标签"}},[e._l(e.dynamicTags,function(t){return a("el-tag",{key:t,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return e.handleCloses(t)}}},[e._v(e._s(t))])}),e._v(" "),e.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ New Tag")]),e._v(" "),a("el-checkbox-group",{model:{value:e.editForm.forumTagIds,callback:function(t){e.$set(e.editForm,"forumTagIds",t)},expression:"editForm.forumTagIds"}},e._l(e.fmTaglist,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.fmTagName))])}),1)],2)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.adddialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.sureAdd}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(o,l,!1,function(e){a("g3to"),a("hayN")},null,null);t.default=u.exports}});
//# sourceMappingURL=7.e415f8bd4f8eeb685461.js.map