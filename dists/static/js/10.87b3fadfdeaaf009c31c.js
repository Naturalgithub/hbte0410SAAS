webpackJsonp([10],{"/CwI":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),s=a.n(r),o=a("exGp"),n=a.n(o),i=a("4kSj"),l=a.n(i),c={data:function(){return{baseurl:this.$store.state.baseurl,wenjian:"",form1:"",total:0,page:1,pageSize:50,CustomerManagement:[],dialogVisible:!1,editVisible:!1,assignForm:{customerName:"",customerPhone:""},editForm:{customerInfoId:"",customerName:"",customerPhone:""},rules:{bankName:[{required:!0,message:"请输入正确数据",trigger:["blur","change"]},{min:3,max:12,message:"用户名长度在 1 到 12 个字符",trigger:["blur","change"]}],bankAddress:[{required:!0,message:"请输入正确数据",trigger:["blur","change"]},{min:3,max:12,message:"密码长度在 1 到 12 个字符",trigger:["blur","change"]}]},huixianame:"",errorMsg:"",successMsg:"",daorudialogVisible:!1}},created:function(){this.getCMList()},methods:{daorubtn:function(){this.daorudialogVisible=!0},getFile:function(e){var t=this;return n()(s.a.mark(function a(){var r,o;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r=new FormData,t.form1=r,o=e.target.files,t.huixianame=o[0].name,t.wenjian=o[0],t.form1.append("file",t.wenjian),t.form1.append("incomeExpenseType",4);case 8:case"end":return a.stop()}},a,t)}))()},sureupload:function(){var e=this;return n()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.daorudialogVisible=!1,a=e,l.a.ajax({url:a.baseurl+"hbte-financial/hbte/customer/importCustomerInfo",type:"POST",data:e.form1,dataType:"JSON",cache:!1,processData:!1,contentType:!1,success:function(e){a.getCMList(),0==e.code?a.$message.success("导入成功,不会覆盖原有数据"):a.$message.error(e.errorMsg)},error:function(e){}});case 3:case"end":return t.stop()}},t,e)}))()},handleSizeChange:function(e){this.pageSize=e,this.page=1,this.getCMList()},handleCurrentChange:function(e){this.page=e,this.getCMList()},getCMList:function(){var e=this;return n()(s.a.mark(function t(){var a,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("hbte-financial/hbte/customer/customerInfoList",{params:{page:e.page,pageSize:e.pageSize}});case 2:a=t.sent,r=a.data,e.CustomerManagement=r.data,e.total=r.count;case 7:case"end":return t.stop()}},t,e)}))()},addUser:function(){var e=this;return n()(s.a.mark(function t(){var a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=5,e.$refs.ruleForm.validate();case 5:a=e.$axios.post("hbte-financial/hbte/customer/saveCustomerInfo",e.assignForm),a.data,e.getCMList(),e.$message.success("添加成功"),e.dialogVisible=!1,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1);case 15:e.getCMList();case 16:case"end":return t.stop()}},t,e,[[1,12]])}))()},showEditDialog:function(e){this.editVisible=!0,this.editForm.customerName=e.customerName,this.editForm.customerPhone=e.customerPhone,this.editForm.customerInfoId=e.customerInfoId},delUser:function(e){var t=this;return n()(s.a.mark(function a(){var r,o;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=1,a.next=4,t.$confirm("亲, 你确认要删除么?","温馨提示",{type:"warning"});case 4:return a.next=6,t.$axios.post("hbte-financial/hbte/customer/delCustomerInfo",{customerInfoId:e});case 6:r=a.sent,0===(o=r.data).code?t.$message({type:"success",message:"删除成功!"}):t.$message.error(o.errorMsg),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1);case 14:t.getCMList();case 15:case"end":return a.stop()}},a,t,[[1,11]])}))()},editMoney:function(){var e=this;return n()(s.a.mark(function t(){var a,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.post("hbte-financial/hbte/customer/updateCustomerInfo",e.editForm);case 2:a=t.sent,0===(r=a.data).code?e.$message.success("修改成功"):e.$message.error(r.errorMsg),e.editVisible=!1,e.getCMList();case 8:case"end":return t.stop()}},t,e)}))()}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"CustomerManagement"},[a("el-button",{staticClass:"addBtn",staticStyle:{margin:"0 0 10px 0"},attrs:{type:"success"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加")]),e._v(" "),a("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"success"},on:{click:e.daorubtn}},[e._v("导入")]),e._v(" "),a("el-dialog",{attrs:{title:"导入",visible:e.daorudialogVisible,width:"30%"},on:{"update:visible":function(t){e.daorudialogVisible=t}}},[a("el-row",[a("a",{attrs:{href:"###"}},[a("input",{ref:"fileInput",attrs:{type:"file"},on:{change:e.getFile}})])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.daorudialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.sureupload}},[e._v("确定录入")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.CustomerManagement,border:"",size:"mini"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"customerName",label:"客户名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"customerPhone",label:"客户联系电话"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{plain:"",size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.showEditDialog(t.row)}}}),e._v(" "),a("el-button",{attrs:{plain:"",size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.delUser(t.row.customerInfoId)}}})]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{background:"","current-page":e.page,"page-sizes":[30,50,80],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:"客户管理",visible:e.dialogVisible,width:"35%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("span",[a("el-form",{ref:"ruleForm",attrs:{rules:e.rules,model:e.assignForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"客户名称",prop:"customerName"}},[a("el-input",{attrs:{placeholder:"请输入客户名称"},model:{value:e.assignForm.customerName,callback:function(t){e.$set(e.assignForm,"customerName",t)},expression:"assignForm.customerName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系方式",prop:"customerPhone"}},[a("el-input",{attrs:{placeholder:"请输入联系方式"},model:{value:e.assignForm.customerPhone,callback:function(t){e.$set(e.assignForm,"customerPhone",t)},expression:"assignForm.customerPhone"}})],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("添 加")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"修改",visible:e.editVisible,width:"35%"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"客户名称"}},[a("el-input",{model:{value:e.editForm.customerName,callback:function(t){e.$set(e.editForm,"customerName",t)},expression:"editForm.customerName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话",prop:"email"}},[a("el-input",{model:{value:e.editForm.customerPhone,callback:function(t){e.$set(e.editForm,"customerPhone",t)},expression:"editForm.customerPhone"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.editMoney}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var m=a("VU/8")(c,u,!1,function(e){a("t72r")},null,null);t.default=m.exports},t72r:function(e,t){}});
//# sourceMappingURL=10.87b3fadfdeaaf009c31c.js.map