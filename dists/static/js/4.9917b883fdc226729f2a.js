webpackJsonp([4],{"6PZr":function(e,t){},I8hz:function(e,t){},YYj4:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),s=a.n(n),o=a("exGp"),r=a.n(o),i={data:function(){return{pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},sels:[],dateOptions:[{value:0,label:"未处理"},{value:1,label:"已处理"},{value:4,label:"已撤销"},{value:3,label:"全部"}],inOutWayId:0,personId:"",chapterTxt:"",startTime:"",endTime:"",valueDate:"",total:2,chapter:"border:3px solid red;color:red",page:1,pageSize:50,once:!1,queryDialogVisible:!1,passForm:{expenseAccount:"",expenseBankName:"",eventInfo:{actExecutions:[],eventInfoId:""},expenseUserInfo:{name:""},actualName:"",clerk:"",incomeExpenseInfoId:"",comment:"",append:"",account:"",oddNumber:"",createDate:"",createTime:"",userInfo:{id:"",name:""},supplier:{supplierName:""},paymentTermId:"",currencyInfo:{currencyInfoId:""},incomeAmount:"",expenseAmount:"",customerInfo:{customerInfoId:"",customerName:""},bankInfo:{bankInfoId:""},actInfoId:"",accountTitle:{accountTitleId:""},companyInfo:{companyInfoId:"",companyName:""},department:{departmentId:""},productLine:{productLineId:""},projectInfo:{projectInfoId:""},sumRatio:"",actExecutions:[]},checkDataa:[],search:"",tableData:[],form:{test:1,text:""},dialogVisible:!1,inOutTitle:"",eventStatus:0}},created:function(){this.getactTodoList()},methods:{dateIdChange:function(e){if(3===e)return this.eventStatus="",void this.getactTodoList();this.eventStatus=e,this.getactTodoList()},roundDate:function(e){e?(this.startTime=e[0],this.endTime=e[1]):(this.startTime="",this.endTime=""),this.getactTodoList()},checkdata:function(e){var t=this;return r()(s.a.mark(function a(){var n,o;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.dialogVisible=!0,a.next=3,t.$axios.get("hbte-financial/hbte/actExecution/getActExecution",{params:{eventInfoId:e}});case 3:n=a.sent,o=n.data,t.checkDataa=o.data;case 6:case"end":return a.stop()}},a,t)}))()},getactTodoList:function(){var e=this;return r()(s.a.mark(function t(){var a,n,o,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=JSON.parse(localStorage.getItem("data")),n="",4===e.eventStatus&&(n=4),t.next=5,e.$axios.get("hbte-financial/hbte/actTodo/actTodoList",{params:{page:e.page,pageSize:e.pageSize,id:a.id,startTime:e.startTime,endTime:e.endTime,actTodoStatus:e.eventStatus,eventStatus:n}});case 5:o=t.sent,r=o.data,e.tableData=r.data,e.total=r.count;case 9:case"end":return t.stop()}},t,e)}))()},selsChange:function(e){this.sels=e},auditServer:function(){var e=this;return r()(s.a.mark(function t(){var a,n,o,r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n in a=[],e.sels)o=e.sels[n],a.push({actExecutionId:o.actExecution.actExecutionId,actExecutionStatus:1,eventInfo:{eventInfoId:o.eventInfo.eventInfoId},incomeExpenseInfo:{incomeExpenseInfoId:o.incomeExpenseInfo.incomeExpenseInfoId}});return t.prev=2,t.next=5,e.$confirm("批量同意选中信息?","温馨提示",{type:"warning"});case 5:return t.next=7,e.$axios.post("hbte-financial/hbte/actExecution/updateActExecutions",{actExecutions:a});case 7:r=t.sent,r.data,e.$message.success("批量同意成功"),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(2);case 14:e.getactTodoList();case 15:case"end":return t.stop()}},t,e,[[2,12]])}))()},handleSizeChange:function(e){this.pageSize=e,this.page=1,this.getactTodoList()},handleCurrentChange:function(e){this.page=e,this.getactTodoList()},getIgnore:function(e){var t=this;return r()(s.a.mark(function a(){var n;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$confirm("确认要忽略此条信息吗?","温馨提示",{type:"warning"});case 3:return a.next=5,t.$axios.post("hbte-financial//hbte/actTodo/update",{actTodoStatus:1,actTodoId:e});case 5:n=a.sent,n.data,t.$message.success("忽略成功"),a.next=12;break;case 10:a.prev=10,a.t0=a.catch(0);case 12:t.getactTodoList();case 13:case"end":return a.stop()}},a,t,[[0,10]])}))()},queryInout:function(e){var t=this;return r()(s.a.mark(function a(){var n,o;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.$store.state.ids=JSON.parse(localStorage.getItem("data")).id,t.queryDialogVisible=!0,a.next=5,t.$axios.get("hbte-financial/hbte/incomeExpense/getIncomeExpenseInfo",{params:{incomeExpenseInfoId:e}});case 5:n=a.sent,o=n.data,t.passForm=o.data,0==o.data.incomeExpenseType?t.inOutTitle="收款单据":1==o.data.incomeExpenseType?t.inOutTitle="付款单据":2==o.data.incomeExpenseType?t.inOutTitle="报销单据":t.inOutTitle="其他单据",0==o.data.actStatus?(t.chapterTxt="进行中",t.chapter="border:3px solid #ccc;color:#ccc",t.once=!1):1==o.data.actStatus?(t.chapterTxt="已同意",t.chapter="border:3px solid rgb(103, 194, 58);color:rgb(103, 194, 58)"):2==o.data.actStatus?(t.chapterTxt="已拒绝",t.chapter="border:3px solid red;color:red"):3==o.data.actStatus&&(t.chapterTxt="已撤销",t.chapter="border:3px solid #ccc;color:#ccc",t.once=!0);case 11:case"end":return a.stop()}},a,t)}))()},sp:function(e,t){var a=this;return r()(s.a.mark(function n(){var o;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a.queryDialogVisible=!1,n.next=4,a.$axios.post("hbte-financial/hbte/actExecution/updateActExecution",{actExecutionId:t.actExecutionId,actExecutionStatus:e,eventInfo:{eventInfoId:a.passForm.eventInfo.eventInfoId,eventTime:a.passForm.eventInfo.eventTime,eventComment:a.passForm.eventInfo.eventComment,userInfo:{id:a.passForm.userInfo.id}},incomeExpenseInfo:{incomeExpenseInfoId:a.passForm.incomeExpenseInfoId}});case 4:o=n.sent,o.data,a.getactTodoList();case 7:case"end":return n.stop()}},n,a)}))()}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ApplicationList"},[a("el-row",[a("el-col",{attrs:{span:10}},[e._v("\n      申请时间：\n      "),a("el-date-picker",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions,"value-format":"yyyy-MM-dd"},on:{change:e.roundDate},model:{value:e.valueDate,callback:function(t){e.valueDate=t},expression:"valueDate"}})],1),e._v(" "),a("el-col",{attrs:{span:8}},[e._v("\n      操作状态:  \n      "),a("el-select",{staticStyle:{"margin-bottom":"20px",width:"60%"},attrs:{placeholder:"请选择操作状态"},on:{change:e.dateIdChange},model:{value:e.inOutWayId,callback:function(t){e.inOutWayId=t},expression:"inOutWayId"}},e._l(e.dateOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:3}},[e._v("\n        \n      "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==e.inOutWayId,expression:"inOutWayId == 0"}],attrs:{type:"danger",icon:"el-icon-document",disabled:0===this.sels.length},on:{click:e.auditServer}},[e._v("批量同意")])],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:e.tableData,size:"mini"},on:{"selection-change":e.selsChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",label:"单据类型"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[0==n.incomeExpenseInfo.incomeExpenseType?a("span",[e._v("收款单据")]):e._e(),e._v(" "),1==n.incomeExpenseInfo.incomeExpenseType?a("span",[e._v("付款单据")]):e._e(),e._v(" "),2==n.incomeExpenseInfo.incomeExpenseType?a("span",[e._v("报销单据")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"eventInfo.userInfo.name",label:"申请人"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"eventTime",label:"申请日期"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",label:"金额"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[""==n.incomeExpenseInfo.incomeAmount?a("span",[e._v(e._s(n.incomeExpenseInfo.expenseAmount))]):a("span",[e._v(e._s(n.incomeExpenseInfo.incomeAmount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"ieProductLines.productLineName",label:"产品线"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return e._l(n.incomeExpenseInfo.ieProductLines,function(t){return a("el-tag",{key:t.id,staticStyle:{"margin-right":"5px"},attrs:{size:"mini"}},[e._v(e._s(t.productLine.productLineName)+": "+e._s(t.practicalSum))])})}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"incomeExpenseInfo.comment",label:"备注内容"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"incomeExpenseInfo.paymentTermName",label:"付款方式"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"incomeExpenseInfo.oddNumber",label:"单号"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[a("a",{attrs:{href:"###"},on:{click:function(t){return e.queryInout(n.incomeExpenseInfo.incomeExpenseInfoId)}}},[e._v(e._s(n.incomeExpenseInfo.oddNumber))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"incomeExpenseInfo.append",label:"附加审批"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"eventInfo.eventStatus",label:"单据状态"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[0===n.eventInfo.eventStatus?a("el-tag",{attrs:{type:"danger",disabled:"",size:"small"}},[e._v("进行中")]):e._e(),e._v(" "),1===n.eventInfo.eventStatus?a("el-tag",{attrs:{type:"danger",disabled:"",size:"small"}},[e._v("已同意")]):e._e(),e._v(" "),2===n.eventInfo.eventStatus?a("el-tag",{attrs:{type:"danger",disabled:"",size:"small"}},[e._v("已拒绝")]):e._e(),e._v(" "),3===n.eventInfo.eventStatus?a("el-tag",{attrs:{type:"danger",disabled:"",size:"small"}},[e._v("已撤销")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[1===n.actTodoStatus?a("el-button",{attrs:{type:"success",size:"small",disabled:""}},[e._v("已处理")]):3===n.eventInfo.eventStatus?a("el-button",{attrs:{type:"info",size:"small"},on:{click:function(t){return e.getIgnore(n.actTodoId)}}},[e._v("忽略")]):0===n.actTodoStatus?a("el-button",{attrs:{type:"info",size:"small",disabled:""}},[e._v("未处理")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{background:"","current-page":e.page,"page-sizes":[30,50,80],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:"当前进度",visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.checkDataa}},[a("el-table-column",{attrs:{prop:"userInfo.name",label:"名字"}}),e._v(" "),a("el-table-column",{attrs:{prop:"actExecutionTime",label:"时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"actExecutionComment",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[0===n.actExecutionStatus?a("el-button",{attrs:{type:"info",disabled:"",size:"small"}},[e._v("未处理")]):e._e(),e._v(" "),1===n.actExecutionStatus?a("el-button",{attrs:{type:"success",disabled:"",size:"small"}},[e._v("同意")]):e._e(),e._v(" "),2===n.actExecutionStatus?a("el-button",{attrs:{type:"danger",disabled:"",size:"small"}},[e._v("拒绝")]):e._e()]}}])})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.inOutTitle,visible:e.queryDialogVisible,width:"40%"},on:{"update:visible":function(t){e.queryDialogVisible=t}}},[a("div",{staticClass:"tempChapter"},[a("div",{staticClass:"chapter",style:e.chapter},[a("span",[e._v(e._s(e.chapterTxt))])])]),e._v(" "),a("table",{staticClass:"selfTable",attrs:{border:"1"}},[a("tr",{staticClass:"tr"},[a("td",[a("b",[e._v("单据")])]),e._v(" "),a("td",{attrs:{colspan:"3"}},[e._v(e._s(e.passForm.oddNumber))])]),e._v(" "),a("tr",[a("td",[a("b",[e._v("制单人")])]),e._v(" "),a("td",[e._v(e._s(e.passForm.userInfo.name))]),e._v(" "),a("td",[a("b",[e._v("制单日期")])]),e._v(" "),a("td",[e._v(e._s(e.passForm.createDate))])]),e._v(" "),a("tr",[a("td",[a("b",[e._v("收付款方式")])]),e._v(" "),a("td",[e._v(e._s(e.passForm.paymentTermName))]),e._v(" "),a("td",[a("b",[e._v("货币信息")])]),e._v(" "),a("td",[e._v(e._s(e.passForm.currencyInfo.currencyName))])]),e._v(" "),a("tr",[a("td",[a("b",[e._v("会计科目")])]),e._v(" "),a("td",[e._v(e._s(e.passForm.accountTitle.accountTitleName))]),e._v(" "),a("td",[a("b",[e._v("公司信息")])]),e._v(" "),a("td",[e._v(e._s(e.passForm.companyInfo.companyName))])]),e._v(" "),e.passForm.expenseBankName?a("tr",[a("td",[a("b",[e._v("报销人")])]),e._v(" "),a("td",[e.passForm.expenseAmount?a("span",[e._v(e._s(e.passForm.expenseUserInfo.name))]):e._e()]),e._v(" "),a("td",[a("b",[e._v("报销银行")])]),e._v(" "),a("td",[e.passForm.expenseBankName?a("span",[e._v(e._s(e.passForm.expenseBankName))]):e._e()])]):e._e(),e._v(" "),e.passForm.expenseAccount?a("tr",[a("td",[a("b",[e._v("报销人账号")])]),e._v(" "),a("td",{attrs:{colspan:"3"}},[e.passForm.expenseAccount?a("span",[e._v(e._s(e.passForm.expenseAccount))]):e._e()])]):e._e(),e._v(" "),e.passForm.supplier.supplierName?a("tr",[a("td",[a("b",[e._v("供应商")])]),e._v(" "),a("td",{attrs:{colspan:"3"}},[e.passForm.supplier.supplierName?a("span",[e._v(e._s(e.passForm.supplier.supplierName))]):e._e()])]):e._e(),e._v(" "),e.passForm.incomeAmount?a("tr",[a("td",[a("b",[e._v("收入金额")])]),e._v(" "),a("td",{attrs:{colspan:"3"}},[e.passForm.incomeAmount?a("span",[e._v(e._s(e.passForm.incomeAmount))]):e._e()])]):e._e(),e._v(" "),e.passForm.expenseAmount?a("tr",[a("td",[a("b",[e._v("支出金额")])]),e._v(" "),a("td",{attrs:{colspan:"3"}},[e.passForm.expenseAmount?a("span",[e._v(e._s(e.passForm.expenseAmount))]):e._e()])]):e._e(),e._v(" "),e.passForm.customerInfo.customerName?a("tr",[a("td",[a("b",[e._v("客户信息")])]),e._v(" "),a("td",{attrs:{colspan:"3"}},[e.passForm.customerInfo.customerName?a("span",[e._v(e._s(e.passForm.customerInfo.customerName))]):e._e()])]):e._e(),e._v(" "),e.passForm.expenseAmount?a("tr",[a("td",[a("b",[e._v("部门")])]),e._v(" "),a("td",{attrs:{colspan:"3"}},[e.passForm.expenseAmount?a("span",[e._v(e._s(e.passForm.department.name))]):e._e()])]):e._e(),e._v(" "),e.passForm.expenseAmount?a("tr",[a("td",[a("b",[e._v("项目信息")])]),e._v(" "),a("td",{attrs:{colspan:"3"}},[e.passForm.expenseAmount?a("span",[e._v(e._s(e.passForm.projectInfo.projectName))]):e._e()])]):e._e(),e._v(" "),a("tr",[a("td",[a("b",[e._v("摘要")])]),e._v(" "),a("td",{attrs:{colspan:"3"}},[e._v(e._s(e.passForm.comment))])]),e._v(" "),e.passForm.append?a("tr",[a("td",[a("b",[e._v("附加审批")])]),e._v(" "),a("td",{attrs:{colspan:"3"}},[e._v(e._s(e.passForm.append))])]):e._e(),e._v(" "),a("tr",[a("td",{attrs:{colspan:"4"}},[a("b",[e._v("产品线分摊表")])])]),e._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[a("b",[e._v("产品线")])]),e._v(" "),a("td",[a("b",[e._v("比例")])]),e._v(" "),a("td",[a("b",[e._v("金额")])])]),e._v(" "),e._l(e.passForm.ieProductLines,function(t){return a("tr",{key:t.ieProductLineId},[a("td",{attrs:{colspan:"2"}},[e._v(e._s(t.productLine.productLineName))]),e._v(" "),a("td",[e._v(e._s(t.sumRatio))]),e._v(" "),a("td",[e._v(e._s(t.practicalSum))])])}),e._v(" "),a("tr",[a("td",{attrs:{colspan:"4"}},[a("b",[e._v("审批进度")])])]),e._v(" "),a("tr",[a("td",[a("b",[e._v("审核人")])]),e._v(" "),a("td",[a("b",[e._v("审核时间")])]),e._v(" "),a("td",[a("b",[e._v("备注")])]),e._v(" "),a("td",[a("b",[e._v("状态")])])]),e._v(" "),e._l(e.passForm.eventInfo.actExecutions,function(t){return a("tr",{key:t.actExecutionId},[a("td",[e._v(e._s(t.userInfo.name))]),e._v(" "),a("td",[e._v(e._s(t.actExecutionTime))]),e._v(" "),a("td",[e._v(e._s(t.actExecutionComment))]),e._v(" "),a("td",[e.$store.state.ids==t.userInfo.id&&0==t.actExecutionStatus?a("span",[a("el-button",{staticStyle:{margin:"3px 0"},attrs:{type:"success",disabled:e.once,size:"mini"},on:{click:function(a){return e.sp(1,t)}}},[e._v("同意")]),e._v(" "),a("el-button",{staticStyle:{margin:"3px 0"},attrs:{type:"danger",disabled:e.once,size:"mini"},on:{click:function(a){return e.sp(2,t)}}},[e._v("拒绝")])],1):0==t.actExecutionStatus?a("span",{staticStyle:{margin:"3px 0"}},[e._v("待处理")]):1==t.actExecutionStatus?a("span",{staticStyle:{margin:"3px 0"}},[e._v("已同意")]):3==t.actExecutionStatus?a("span",{staticStyle:{margin:"3px 0"}},[e._v("已撤销")]):a("span",{staticStyle:{margin:"3px 0"}},[e._v("已拒绝")])])])})],2),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.passForm,"label-width":"80px"}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.queryDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.queryDialogVisible=!1}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,c,!1,function(e){a("I8hz"),a("6PZr")},null,null);t.default=l.exports}});
//# sourceMappingURL=4.9917b883fdc226729f2a.js.map