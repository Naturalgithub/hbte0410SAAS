webpackJsonp([33],{MGaV:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Xxa5"),s=a.n(i),r=a("exGp"),l=a.n(r),o={data:function(){return{imageUrl:"",imageUrll:"",total:0,page:1,pageSize:50,options:[{value:"选项1",label:"黄金糕"}],AdddialogVisible:!1,editdialogVisible:!1,tableData:[{date:"2016-05-02",imgname:"财务系统",imgaddress:"www....img",imgintroduce:"这是财务系统图片,不超过十个字"}],addform:{appDescribe:"",appImgPath:"",appName:"",ids:"",appUrl:""},editform:{appDescribe:"",appImgPath:"",appName:"",appInfoId:"",ids:"",appUrl:""},value:""}},created:function(){this.getList(),this.getoption()},methods:{changeState:function(e){var t=this;return l()(s.a.mark(function a(){var i,r;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(2!=e.isDisable){a.next=12;break}return a.next=5,t.$axios.post("hbte-dingding/app/update",{isDisable:e.isDisable,appInfoId:e.appInfoId});case 5:i=a.sent,i.data,t.$message.info("停用后,首页将没有此模块"),t.getJueseList(),a.next=18;break;case 12:return a.next=14,t.$axios.post("hbte-dingding/app/update",{isDisable:e.isDisable,appInfoId:e.appInfoId});case 14:r=a.sent,r.data,t.getList();case 18:case"end":return a.stop()}},a,t)}))()},getoption:function(){var e=this;return l()(s.a.mark(function t(){var a,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios("hbte-dingding/sys/list");case 2:a=t.sent,i=a.data,e.options=i.result.sysModules;case 6:case"end":return t.stop()}},t,e)}))()},delapp:function(e){var t=this;return l()(s.a.mark(function a(){var i,r,l;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$confirm("亲, 你确认要删除么?","温馨提示",{type:"warning"});case 3:return i=e.appInfoId,a.next=6,t.$axios.post("hbte-dingding/app/delete",{appInfoId:i});case 6:r=a.sent,0==(l=r.data).code?t.$message({type:"success",message:"删除成功!"}):t.$message(l.message),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(0);case 14:t.getList();case 15:case"end":return a.stop()}},a,t,[[0,11]])}))()},edit:function(e){this.imageUrll="",this.editform.appInfoId=e.appInfoId,this.editform.appDescribe=e.appDescribe,this.editform.appImgPath=e.appImgPath,this.editform.appName=e.appName,this.editform.appUrl=e.appUrl,this.editform.ids=e.ids,this.editdialogVisible=!0},sureedit:function(){var e=this;return l()(s.a.mark(function t(){var a,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.post("hbte-dingding/app/update",e.editform);case 2:a=t.sent,i=a.data,e.editdialogVisible=!1,0==i.code?e.$message.success("修改成功"):e.$message.error(i.message),e.getList();case 8:case"end":return t.stop()}},t,e)}))()},addapp:function(){this.AdddialogVisible=!0},sureAdd:function(){var e=this;return l()(s.a.mark(function t(){var a,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.post("hbte-dingding/app/add",e.addform);case 2:a=t.sent,0==(i=a.data).code?(e.$refs.uploadImg.clearFiles(),e.$message.success("添加成功"),e.addform.appInfoId="",e.addform.appDescribe="",e.addform.appImgPath="",e.addform.appName="",e.addform.ids="",e.$router.push("/icon")):e.$message.error(i.message),e.$refs.uploadImg.clearFiles(),e.AdddialogVisible=!1,e.getList();case 8:case"end":return t.stop()}},t,e)}))()},getList:function(){var e=this;return l()(s.a.mark(function t(){var a,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios("hbte-dingding/app/list",{params:{page:e.page,pageSize:e.pageSize}});case 2:a=t.sent,i=a.data,e.tableData=i.result.appInfos,e.total=i.count;case 7:case"end":return t.stop()}},t,e)}))()},handleSizeChange:function(e){this.pageSize=e,this.page=1,this.getList()},handleCurrentChange:function(e){this.page=e,this.getList()},handleAvatarSuccess:function(e,t){var a=e;this.imageUrl=URL.createObjectURL(t.raw),this.imageUrll=URL.createObjectURL(t.raw),this.addform.appImgPath=a.result.appImgPath,this.editform.appImgPath=a.result.appImgPath},beforeAvatarUpload:function(e){this.imageUrl="",this.imageUrll="";var t="image/jpeg"===e.type||"image/png",a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG/PNG/BMP 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"icon"},[a("el-button",{staticClass:"four-btn",staticStyle:{"margin-bottom":"10px"},attrs:{type:"success"},on:{click:e.addapp}},[e._v("添加应用")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"应用图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:"http://47.98.145.222:8080/"+e.row.appImgPath,alt:""}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"appName",label:"应用名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appUrl",label:"应用URL"}}),e._v(" "),a("el-table-column",{attrs:{prop:"appDescribe",label:"应用描述"}}),e._v(" "),a("el-table-column",{attrs:{label:"停用/启用"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":2},on:{change:function(a){return e.changeState(t.row)}},model:{value:t.row.isDisable,callback:function(a){e.$set(t.row,"isDisable",a)},expression:"scope.row.isDisable"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"编辑"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{staticStyle:{"mragin-left":"10px","margin-right":"10"},attrs:{type:"primary"},on:{click:function(a){return e.edit(t.row)}}},[e._v("编辑")]),e._v("  | \n        "),a("el-link",{staticStyle:{"mragin-left":"10px","margin-right":"10"},attrs:{type:"danger"},on:{click:function(a){return e.delapp(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.page,"page-sizes":[2,30,50,80],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.AdddialogVisible,width:"30%"},on:{"update:visible":function(t){e.AdddialogVisible=t}}},[a("el-form",{attrs:{model:e.addform,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"应用模块"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.addform.ids,callback:function(t){e.$set(e.addform,"ids",t)},expression:"addform.ids"}},e._l(e.options,function(e){return a("el-option",{key:e.sysModuleId,attrs:{label:e.moduleName,value:e.sysModuleId}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"应用名称"}},[a("el-input",{attrs:{placeholder:"请输入应用名称"},model:{value:e.addform.appName,callback:function(t){e.$set(e.addform,"appName",t)},expression:"addform.appName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用URL"}},[a("el-input",{attrs:{placeholder:"请输入应用URL"},model:{value:e.addform.appUrl,callback:function(t){e.$set(e.addform,"appUrl",t)},expression:"addform.appUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用描述"}},[a("el-input",{attrs:{placeholder:"请输入应用描述"},model:{value:e.addform.appDescribe,callback:function(t){e.$set(e.addform,"appDescribe",t)},expression:"addform.appDescribe"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传图片",enctype:"multipart/form-data",method:"post"}},[a("el-upload",{ref:"uploadImg",staticClass:"avatar-uploader",attrs:{action:"http://47.98.145.222:8080/hbte-dingding/app/uploadFile","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.AdddialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.sureAdd}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"提示",visible:e.editdialogVisible,width:"30%"},on:{"update:visible":function(t){e.editdialogVisible=t}}},[a("el-form",{attrs:{model:e.editform,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"应用模块"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.editform.ids,callback:function(t){e.$set(e.editform,"ids",t)},expression:"editform.ids"}},e._l(e.options,function(e){return a("el-option",{key:e.sysModuleId,attrs:{label:e.moduleName,value:e.sysModuleId}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"应用名称"}},[a("el-input",{attrs:{placeholder:"请输入模块名字"},model:{value:e.editform.appName,callback:function(t){e.$set(e.editform,"appName",t)},expression:"editform.appName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用URL"}},[a("el-input",{attrs:{placeholder:"请输入模块名字"},model:{value:e.editform.appUrl,callback:function(t){e.$set(e.editform,"appUrl",t)},expression:"editform.appUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"应用描述"}},[a("el-input",{attrs:{placeholder:"请输入模块名字"},model:{value:e.editform.appDescribe,callback:function(t){e.$set(e.editform,"appDescribe",t)},expression:"editform.appDescribe"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传图片",enctype:"multipart/form-data",method:"post"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://47.98.145.222:8080/hbte-dingding/app/uploadFile","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrll?a("img",{staticClass:"avatar",attrs:{src:e.imageUrll}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editdialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.sureedit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(o,n,!1,function(e){a("Yz1p")},"data-v-021ca954",null);t.default=p.exports},Yz1p:function(e,t){}});
//# sourceMappingURL=33.b48206e3ea5cc0019e6b.js.map