webpackJsonp([11],{"4eAY":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),r=a.n(n),i=a("exGp"),o=a.n(i),s=a("4kSj"),l=a.n(s),u={data:function(){return{rules:{bankName:[{required:!0,message:"请输入正确数据",trigger:["blur","change"]},{min:3,max:12,message:"用户名长度在 1 到 12 个字符",trigger:["blur","change"]}],bankAddress:[{required:!0,message:"请输入正确数据",trigger:["blur","change"]},{min:3,max:12,message:"密码长度在 1 到 12 个字符",trigger:["blur","change"]}]},baseurl:this.$store.state.baseurl,query:"",total:0,page:1,pageSize:50,momeyManagementList:[],dialogVisible:!1,form:{supplierName:"",supplierPhone:"",bankInfo:{bankInfoId:"",bankName:""},supplierAccount:""},editForm:{supplierAccount:"",supplierId:"",supplierName:"",supplierPhone:"",bankInfo:{bankInfoId:"",bankName:""}},editVisible:!1,assignVisible:!1,assignForm:{id:"",rid:"",username:""},roleList:[],yhxxoptions:[],huixianame:"",wenjian:"",form1:"",daorudialogVisible:!1}},created:function(){this.getMoneyList(),this.getAllBankName()},methods:{daorubtn:function(){this.daorudialogVisible=!0},getFile:function(e){var t=this;return o()(r.a.mark(function a(){var n,i;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n=new FormData,t.form1=n,i=e.target.files,t.huixianame=i[0].name,t.wenjian=i[0],t.form1.append("file",t.wenjian),t.form1.append("incomeExpenseType",3);case 9:case"end":return a.stop()}},a,t)}))()},sureupload:function(){var e=this;return o()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.daorudialogVisible=!1,a=e,l.a.ajax({url:a.baseurl+"hbte-financial/hbte/supplier/importSupplierInfo",type:"POST",data:e.form1,dataType:"JSON",cache:!1,processData:!1,contentType:!1,success:function(e){a.getMoneyList(),0==e.code?a.$message.success("导入成功,不会覆盖原数据"):a.$message.error(e.errorMsg)},error:function(e){}});case 3:case"end":return t.stop()}},t,e)}))()},getAllBankName:function(){var e=this;return o()(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("hbte-financial/hbte/bank/bankInfoList");case 2:a=t.sent,n=a.data,e.yhxxoptions=n.data;case 5:case"end":return t.stop()}},t,e)}))()},getMoneyList:function(){var e=this;return o()(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("hbte-financial/hbte/supplier/supplierList",{params:{page:e.page,pageSize:e.pageSize}});case 2:a=t.sent,n=a.data,e.momeyManagementList=n.data,e.total=n.data.length;case 6:case"end":return t.stop()}},t,e)}))()},handleSizeChange:function(e){this.pagesize=e,this.pagenum=1,this.getMoneyList()},handleCurrentChange:function(e){this.pagenum=e,this.getMoneyList()},showEditDialog:function(e){this.editVisible=!0,this.editForm.supplierName=e.supplierName,this.editForm.supplierPhone=e.supplierPhone,this.editForm.supplierId=e.supplierId,this.editForm.supplierAccount=e.supplierAccount,this.editForm.bankInfo.bankName=e.bankInfo.bankName,this.editForm.bankInfo.bankInfoId=e.bankInfo.bankInfoId},delUser:function(e){var t=this;return o()(r.a.mark(function a(){var n,i;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$confirm("亲, 你确认要删除么?","温馨提示",{type:"warning"});case 3:return a.next=5,t.$axios.post("hbte-financial/hbte/supplier/deleteSupplier",{supplierId:e});case 5:n=a.sent,0===(i=n.data).code?t.$message({type:"success",message:"删除成功!"}):t.$message.error(i.errorMsg),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0);case 13:t.getMoneyList();case 14:case"end":return a.stop()}},a,t,[[0,10]])}))()},editMoney:function(){var e=this;return o()(r.a.mark(function t(){var a;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.post("hbte-financial/hbte/supplier/updateSupplier",e.editForm);case 2:a=t.sent,0===a.data.code?e.$message.success("修改成功"):e.$message.error("修改失败"),e.editVisible=!1,e.getMoneyList();case 7:case"end":return t.stop()}},t,e)}))()},moneyadd:function(){var e=this;return o()(r.a.mark(function t(){var a,n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.post("hbte-financial/hbte/supplier/addSupplier",e.form);case 2:a=t.sent,0===(n=a.data).code?e.$message.success("添加成功"):e.$message.error(n.errorMsg),e.getMoneyList(),e.dialogVisible=!1;case 7:case"end":return t.stop()}},t,e)}))()}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"users"},[a("el-button",{staticClass:"addBtn",staticStyle:{margin:"0 0 10px 0"},attrs:{type:"success"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加")]),e._v(" "),a("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"success"},on:{click:e.daorubtn}},[e._v("导入")]),e._v(" "),a("el-dialog",{attrs:{title:"导   入",visible:e.daorudialogVisible,width:"30%"},on:{"update:visible":function(t){e.daorudialogVisible=t}}},[a("el-row",[a("a",{attrs:{href:"###"}},[a("input",{ref:"fileInput",attrs:{type:"file"},on:{change:e.getFile}})])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.daorudialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.sureupload}},[e._v("确定录入")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.momeyManagementList,border:"",size:"mini"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplierName",label:"供应商名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplierPhone",label:"联系号码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bankInfo.bankName",label:"开户行"}}),e._v(" "),a("el-table-column",{attrs:{prop:"supplierAccount",label:"账号"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{plain:"",size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.showEditDialog(t.row)}}}),e._v(" "),a("el-button",{attrs:{plain:"",size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.delUser(t.row.supplierId)}}})]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.page,"page-sizes":[30,50,80],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:"供应商管理",visible:e.dialogVisible,width:"35%"},on:{"update:visible":function(t){e.dialogVisible=t}},scopedSlots:e._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.moneyadd}},[e._v("确 定")])],1)]},proxy:!0}])},[a("el-form",{ref:"form",attrs:{model:e.form,"status-icon":"","label-width":"100px"}},[a("el-form-item",{attrs:{label:"供应商"}},[a("el-input",{attrs:{placeholder:"供应商"},model:{value:e.form.supplierName,callback:function(t){e.$set(e.form,"supplierName",t)},expression:"form.supplierName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系号码"}},[a("el-input",{attrs:{placeholder:"联系号码"},model:{value:e.form.supplierPhone,callback:function(t){e.$set(e.form,"supplierPhone",t)},expression:"form.supplierPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"账号"}},[a("el-input",{attrs:{placeholder:"账号"},model:{value:e.form.supplierAccount,callback:function(t){e.$set(e.form,"supplierAccount",t)},expression:"form.supplierAccount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"银行名称"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.bankInfo.bankInfoId,callback:function(t){e.$set(e.form.bankInfo,"bankInfoId",t)},expression:"form.bankInfo.bankInfoId"}},e._l(e.yhxxoptions,function(e){return a("el-option",{key:e.bankInfoId,attrs:{label:e.bankName,value:e.bankInfoId}})}),1)],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改",visible:e.editVisible,width:"35%"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"供应商"}},[a("el-input",{model:{value:e.editForm.supplierName,callback:function(t){e.$set(e.editForm,"supplierName",t)},expression:"editForm.supplierName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系号码"}},[a("el-input",{model:{value:e.editForm.supplierPhone,callback:function(t){e.$set(e.editForm,"supplierPhone",t)},expression:"editForm.supplierPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"银行账号"}},[a("el-input",{model:{value:e.editForm.supplierAccount,callback:function(t){e.$set(e.editForm,"supplierAccount",t)},expression:"editForm.supplierAccount"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"银行名称"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.editForm.bankInfo.bankInfoId,callback:function(t){e.$set(e.editForm.bankInfo,"bankInfoId",t)},expression:"editForm.bankInfo.bankInfoId"}},e._l(e.yhxxoptions,function(e){return a("el-option",{key:e.bankInfoId,attrs:{label:e.bankName,value:e.bankInfoId}})}),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.editMoney}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(u,c,!1,function(e){a("athD")},"data-v-c408df50",null);t.default=p.exports},athD:function(e,t){}});
//# sourceMappingURL=11.fb35b7317eda9b15595f.js.map