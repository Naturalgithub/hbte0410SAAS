webpackJsonp([20],{M1Vu:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),i=a.n(r),s=a("exGp"),n=a.n(s),l={data:function(){return{AdddialogVisible:!1,EditdialogVisible:!1,total:0,page:1,pageSize:50,value:!0,Addform:{loginname:"",userName:"",mobileNumber:"",address:"",email:"",jueName:""},Editform:{loginname:"",userName:"",mobileNumber:"",address:"",email:"",jueName:"",roleIds:[],id:""},tableData:[{mobileNumber:"15615655656",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄",jueName:"超级管理员",value:!0,email:"5555@qq.com"},{mobileNumber:"12215655656",name:"赵小虎",address:"北京市朝阳区某江路 898 号",jueName:"普通用户",value:!1,email:"5555@qq.com"}],options:[{value:"选项1",label:"超级管理员"},{value:"选项2",label:"普通用户"}],value1:[]}},created:function(){this.getUserlist(),this.getuserrole()},methods:{changeState:function(e){var t=this;return n()(i.a.mark(function a(){var r,s;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(2!=e.isDisable){a.next=12;break}return a.next=5,t.$axios.post("hbte-dingding/user/update",{isSysAdmin:e.isSysAdmin,userId:e.userId});case 5:r=a.sent,r.data,t.$message.info("停用后,用户无法访问后台管理系统"),t.getUserlist(),a.next=18;break;case 12:return a.next=14,t.$axios.post("hbte-dingding/user/update",{isSysAdmin:e.isSysAdmin,userId:e.userId});case 14:s=a.sent,s.data,t.getUserlist();case 18:case"end":return a.stop()}},a,t)}))()},getuserrole:function(){var e=this;return n()(i.a.mark(function t(){var a,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios("hbte-dingding/role/list");case 2:a=t.sent,r=a.data,e.options=r.result.roles;case 6:case"end":return t.stop()}},t,e)}))()},getUserlist:function(){var e=this;return n()(i.a.mark(function t(){var a,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("hbte-dingding/user/list",{params:{page:e.page,pageSize:e.pageSize}});case 2:a=t.sent,r=a.data,e.tableData=r.result.users,e.total=r.count;case 7:case"end":return t.stop()}},t,e)}))()},editthis:function(e){this.Editform.id=e.row.id,this.Editform.roleIds=e.row.roleIds,this.EditdialogVisible=!0},sureedit:function(){var e=this;return n()(i.a.mark(function t(){var a,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.EditdialogVisible=!1,t.next=3,e.$axios.post("hbte-dingding/user/update",e.Editform);case 3:a=t.sent,0==(r=a.data).code?(e.$message.success("添加成功"),e.Editform.roleIds=[],e.getUserlist()):(e.Editform.roleIds=[],e.$message.error(r.error)),e.getUserlist();case 7:case"end":return t.stop()}},t,e)}))()},handleSizeChange:function(e){this.pageSize=e,this.page=1,this.getUserlist()},handleCurrentChange:function(e){this.page=e,this.getUserlist()}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addArticle"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",width:"50",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"jobnumber",label:"工号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"position",label:"职位"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"电子邮箱"}}),e._v(" "),a("el-table-column",{attrs:{prop:"workPlace",label:"办公地点"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{staticStyle:{"mragin-left":"10px","margin-right":"10"},attrs:{type:"primary"},on:{click:function(a){return e.editthis(t)}}},[e._v("分配角色")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"后台管理权限"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":2},on:{change:function(a){return e.changeState(t.row)}},model:{value:t.row.isSysAdmin,callback:function(a){e.$set(t.row,"isSysAdmin",a)},expression:"scope.row.isSysAdmin"}})]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.page,"page-sizes":[30,50,80],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:"分配角色",visible:e.EditdialogVisible,width:"30%"},on:{"update:visible":function(t){e.EditdialogVisible=t}}},[a("el-form",{attrs:{model:e.Editform,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"分配角色"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:e.Editform.roleIds,callback:function(t){e.$set(e.Editform,"roleIds",t)},expression:"Editform.roleIds"}},e._l(e.options,function(e){return a("el-option",{key:e.roleId,attrs:{label:e.roleName,value:e.roleId}})}),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.EditdialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.sureedit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(l,o,!1,function(e){a("rasE")},"data-v-68e32c9a",null);t.default=u.exports},rasE:function(e,t){}});
//# sourceMappingURL=20.dcd7a05b5a4bef8e2efe.js.map