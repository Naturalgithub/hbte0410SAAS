webpackJsonp([25],{"33S9":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xxa5"),i=a.n(n),o=a("exGp"),r=a.n(o),s={data:function(){return{handleChangeValue:"",title:"",pageSize:30,total:0,page:1,accountValue:"",operateValue:"",operateOptions:[{value:"+",label:"+"},{value:"-",label:"-"},{value:"*",label:"*"},{value:"/",label:"/"},{value:"=",label:"="},{value:"(",label:"("},{value:")",label:")"}],AcctountOptions:[],options:[],defaultProps:{children:"children",label:"accountTitleName"},cprops:{checkStrictly:!0,label:"accountTitleName",value:"accountTitleId",children:"children"},data:[],addTit:!1,addForm:!1,dialogFormula:!1,dialogVisible:!1,changedialogVisible:!1,changedialogFormula:!1,form:{accountTitleId:"",accountTitleName:"",accountTitleCode:""},changeform:{accountTitleId:"",accountTitleName:"",accountTitleCode:""},projectList:[],postArr:[],equation:"",equations:[],equationPass:{id:"",arithmeticName:"",arithmeticComment:"",equations:[],arithmeticStatus:""}}},created:function(){this.getAccountingItemList(),this.getArithmeticList()},methods:{changee:function(t,e){var a=this;return r()(i.a.mark(function n(){var o,r;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,a.$axios.post("hbte-financial/hbte/arithmetic/update_status",{arithmeticStatus:t,id:e.id});case 3:o=n.sent,0==(r=o.data).code?(a.$message.success("修改成功"),a.getArithmeticList()):a.$message.error(r.errorMsg);case 6:case"end":return n.stop()}},n,a)}))()},delequation:function(t){var e=this;return r()(i.a.mark(function a(){var n;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=1,a.next=4,e.$confirm("亲, 你确认要删除么?","温馨提示",{type:"warning"});case 4:return a.next=6,e.$axios.post("hbte-financial/hbte/arithmetic/delete",{id:t.id});case 6:n=a.sent,0===n.data.code?(e.$message({type:"success",message:"删除成功!"}),e.getArithmeticList()):e.$message({type:"info",message:"已取消删除"}),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1);case 14:case"end":return a.stop()}},a,e,[[1,11]])}))()},showEditDialog:function(t){var e=this;this.equationPass.id=t.id,this.equation=[],this.equationPass.equations=[],this.dialogFormula=!0,this.$nextTick(function(){e.equationPass.arithmeticName=t.arithmeticName,e.equationPass.arithmeticEquation=t.arithmeticEquation,e.equationPass.arithmeticComment=t.arithmeticComment,e.equationPass.arithmeticStatus=t.arithmeticStatus,e.title="修改公式"})},adddialogFormula:function(){this.dialogFormula=!0,this.title="添加公式",this.equationPass.arithmeticName="",this.equationPass.arithmeticEquation="",this.equationPass.arithmeticComment="",this.equation=[]},getArithmeticList:function(){var t=this;return r()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("hbte-financial/hbte/arithmetic/list",{params:{page:t.page,pageSize:t.pageSize}});case 2:a=e.sent,t.projectList=a.data.data;case 5:case"end":return e.stop()}},e,t)}))()},backSpace:function(){this.postArr.pop(),this.equationPass.equations.pop(),this.equation=this.postArr.join("")},accountValueChange:function(t){this.operateValue="",this.equationPass.equations.push(t.toString());var e=this.options.filter(function(e){return e.accountTitleId==t});this.postArr.push(e[0].accountTitleName),this.equation=this.postArr.join("")},operateValuechange:function(t){this.accountValue="",this.postArr.push(t),this.equationPass.equations.push(t),this.equation=this.postArr.join("")},handleSizeChange:function(t){this.pageSize=t,this.page=1},handleCurrentChange:function(t){this.page=t},addUser:function(){var t=this;return r()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.saveAccountTitle(t.form);case 2:a=e.sent,t.dialogVisible=!1,0==a.code?t.$message.success("添加成功"):t.$message.error(a.errorMsg),t.getAccountingItemList();case 7:case"end":return e.stop()}},e,t)}))()},changeaddUser:function(){var t=this;return r()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.updateAccountTitle(t.changeform);case 2:a=e.sent,a.data,t.$message.success("修改成功"),t.changedialogVisible=!1,t.getAccountingItemList();case 7:case"end":return e.stop()}},e,t)}))()},addFor:function(){var t=this;return r()(i.a.mark(function e(){var a,n,o,r,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("+"!=(a=t.equationPass.equations[t.equationPass.equations.length-1])&&"-"!=a&&")"!=a&&"="!=a&&"/"!=a&&"("!=a&&"*"!=a&&"="!=a){e.next=6;break}return e.abrupt("return");case 6:if("修改公式"!=t.title){e.next=14;break}return e.next=9,t.$axios.post("hbte-financial/hbte/arithmetic/update",t.equationPass);case 9:n=e.sent,0==(o=n.data).code?(t.$message.success("操作成功"),t.dialogFormula=!1,t.getArithmeticList()):t.$message.error(o.errorMsg),e.next=20;break;case 14:return e.next=16,t.$axios.post("hbte-financial/hbte/arithmetic/add",t.equationPass);case 16:r=e.sent,s=r.data,t.dialogFormula=!1,0==s.code?(t.$message.success("添加成功"),t.equationPass.arithmeticName="",t.equationPass.arithmeticComment="",t.equation="",t.dialogFormula=!1,t.getArithmeticList()):t.$message.error(s.errorMsg);case 20:case"end":return e.stop()}},e,t)}))()},changeaddFor:function(){var t=this;return r()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.updateArith();case 2:a=e.sent,a.data,t.changedialogFormula=!1;case 6:case"end":return e.stop()}},e,t)}))()},handleChange:function(t){this.form.accountTitleId=t},append:function(t){this.changedialogVisible=!0,this.changeform.accountTitleId=t.accountTitleId,this.changeform.accountTitleName=t.accountTitleName,this.changeform.accountTitleCode=t.accountTitleCode},getAccountingItemList:function(){var t=this;return r()(i.a.mark(function e(){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.accountTitleList();case 2:a=e.sent,n=a.data,t.data=n,t.options=n;case 6:case"end":return e.stop()}},e,t)}))()},remove:function(t,e){var a=this;return r()(i.a.mark(function n(){var o,r,s,c;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.$confirm("确认要删除么?(若删除父级目录则子目录内容全部删除)","温馨提示",{type:"warning"});case 3:return n.next=5,a.$http.delAccountTitle({accountTitleId:e.accountTitleId});case 5:0==(o=n.sent).code?a.$message.success("删除成功"):a.$message.error(o.errorMsg),n.next=11;break;case 9:n.prev=9,n.t0=n.catch(0);case 11:a.getAccountingItemList(),r=t.parent,s=r.data.children||r.data,c=s.findIndex(function(t){return t.id===data.id}),s.splice(c,1);case 16:case"end":return n.stop()}},n,a,[[0,9]])}))()},handleNodeClick:function(t,e,a){var n=this;return r()(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.passId=t.id,n.getProjectList();case 3:case"end":return e.stop()}},e,n)}))()},getProjectList:function(){var t=this;return r()(i.a.mark(function e(){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.delAccountTitle({accountTitleId:data.accountTitleId});case 2:a=e.sent,t.total=a.result.length,t.projectList=a.result;case 6:case"end":return e.stop()}},e,t)}))()},renderContent:function(t,e){var a=this,n=e.node,i=e.data;e.store;return t("span",{class:"custom-tree-node"},[t("span",[n.label]),t("span",[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return a.append(i)}}},["Append"]),t("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return a.remove(n,i)}}},["Delete"])])])}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AccountingItem"},[a("el-button",{staticClass:"addBtn",staticStyle:{"margin-bottom":"10px"},attrs:{type:"success"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("添加会计科目")]),t._v(" "),a("el-button",{staticClass:"addBtn  ",staticStyle:{"margin-bottom":"10px"},attrs:{type:"success"},on:{click:t.adddialogFormula}},[t._v("添加公式")]),t._v(" "),a("div",{staticClass:"block ",staticStyle:{"margin-top":"10px"}},[a("el-tree",{staticClass:"fl",staticStyle:{width:"20%"},attrs:{data:t.data,"node-key":"id",props:t.defaultProps,"expand-on-click-node":!1},on:{"node-click":t.handleNodeClick},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.node,i=e.data;return a("span",{staticClass:"custom-tree-node"},[a("span",{staticClass:"el-icon-notebook-2"},[t._v("  "+t._s(i.accountTitleCode)+"-"+t._s(n.label))]),t._v(" "),a("span",[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return t.append(i)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return t.remove(n,i)}}},[t._v("删除")])],1)])}}])})],1),t._v(" "),a("div",{staticClass:"fr"},[a("el-table",{attrs:{data:t.projectList,border:"",size:"mini"}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"arithmeticName",label:"算法名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center","wdith:1000":"",prop:"arithmeticEquation",label:"公式"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"arithmeticComment",label:"备注"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":2},on:{change:function(a){return t.changee(a,e.row)}},model:{value:e.row.arithmeticStatus,callback:function(a){t.$set(e.row,"arithmeticStatus",a)},expression:"obj.row.arithmeticStatus"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"编辑"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{plain:"",size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return t.showEditDialog(e.row)}}}),t._v(" "),a("el-button",{attrs:{plain:"",size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t.delequation(e.row)}}})]}}])})],1),t._v(" "),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{background:"","current-page":t.page,"page-sizes":[30,50,80],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"会计科目管理",visible:t.dialogVisible,width:"35%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"会计科目"}},[a("el-select",{attrs:{placeholder:"请选择科目"},on:{change:t.handleChange},model:{value:t.handleChangeValue,callback:function(e){t.handleChangeValue=e},expression:"handleChangeValue"}},t._l(t.options,function(t){return a("el-option",{key:t.accountTitleId,attrs:{label:t.accountTitleName,value:t.accountTitleId}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"科目名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入会计科目名称"},model:{value:t.form.accountTitleName,callback:function(e){t.$set(t.form,"accountTitleName",e)},expression:"form.accountTitleName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"科目编码",prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入会计科目编码"},model:{value:t.form.accountTitleCode,callback:function(e){t.$set(t.form,"accountTitleCode",e)},expression:"form.accountTitleCode"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addUser}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"修改",visible:t.changedialogVisible,width:"35%"},on:{"update:visible":function(e){t.changedialogVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.changeform,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"科目名称"}},[a("el-input",{model:{value:t.changeform.accountTitleName,callback:function(e){t.$set(t.changeform,"accountTitleName",e)},expression:"changeform.accountTitleName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"科目编码"}},[a("el-input",{model:{value:t.changeform.accountTitleCode,callback:function(e){t.$set(t.changeform,"accountTitleCode",e)},expression:"changeform.accountTitleCode"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.changedialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.changeaddUser}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.title,visible:t.dialogFormula,width:"35%"},on:{"update:visible":function(e){t.dialogFormula=e}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"算法名称"}},[a("el-input",{model:{value:t.equationPass.arithmeticName,callback:function(e){t.$set(t.equationPass,"arithmeticName",e)},expression:"equationPass.arithmeticName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"算法描述"}},[a("el-input",{model:{value:t.equationPass.arithmeticComment,callback:function(e){t.$set(t.equationPass,"arithmeticComment",e)},expression:"equationPass.arithmeticComment"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"公式"}},[a("el-input",{nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.backSpace(e)}},model:{value:t.equation,callback:function(e){t.equation=e},expression:"equation"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"选择"}},[a("el-row",[a("el-col",{staticStyle:{"margin-right":"10px","padding-right":"10px"},attrs:{span:12}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-select",{attrs:{placeholder:"请选择科目"},on:{change:t.accountValueChange},model:{value:t.accountValue,callback:function(e){t.accountValue=e},expression:"accountValue"}},t._l(t.options,function(t){return a("el-option",{key:t.accountTitleId,attrs:{label:t.accountTitleName,value:t.accountTitleId}})}),1)],1)]),t._v(" "),a("el-col",{attrs:{span:11}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-select",{attrs:{placeholder:"请选择运算符"},on:{change:t.operateValuechange},model:{value:t.operateValue,callback:function(e){t.operateValue=e},expression:"operateValue"}},t._l(t.operateOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.value,value:t.value}})}),1)],1)])],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormula=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addFor}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(s,c,!1,function(t){a("EsP6")},null,null);e.default=l.exports},EsP6:function(t,e){}});
//# sourceMappingURL=25.0d3e52ecd83e814ae30a.js.map