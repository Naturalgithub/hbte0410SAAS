webpackJsonp([34],{"Q/iw":function(e,t,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=_("tmBP"),r={render:function(){var e=this,t=e.$createElement,_=e._self._c||t;return _("div",{staticClass:"pline"},[_("div",{staticClass:"export"},[_("el-button",{staticStyle:{"margin-bottom":"10px","margin-right":"60px"},attrs:{size:"medium",type:"success"},on:{click:e.exportExcel}},[e._v("导出")]),e._v(" "),e._v("\n    制单日期：\n    "),_("el-date-picker",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:e.roundDate},model:{value:e.valueDate,callback:function(t){e.valueDate=t},expression:"valueDate"}})],1),e._v(" "),_("el-table",{ref:"eltable",staticStyle:{width:"100%","margin-bottom":"20px","margin-top":"10px"},attrs:{id:"table",data:e.tableData,border:"",size:"mini","row-key":"accountTitleId","tree-props":{children:"children",hasChildren:"hasChildren",label:"productLineName"}}},[_("el-table-column",{attrs:{prop:"accountTitleName",label:"费用明细/部门",fixed:"",width:"150"}}),e._v(" "),_("el-table-column",{attrs:{align:"center",prop:"sum",border:"",label:"合计"},scopedSlots:e._u([{key:"default",fn:function(t){var _=t.row;return[e._v(e._s("undefined"==e.countRow(_.sum)?"":e.countRow(_.sum)))]}}])}),e._v(" "),e._l(e.dapartmentList,function(t){return _("el-table-column",{key:t.productLineId,attrs:{align:"center",prop:"sum",label:t.productLineName},scopedSlots:e._u([{key:"default",fn:function(_){var a=_.row;return[e._v(e._s(e.rowa(a,t.productLineId)))]}}],null,!0)},[e._v(" "),e._l(t.children,function(t){return _("el-table-column",{key:t.productLineId,attrs:{align:"center",prop:"",label:t.productLineName},scopedSlots:e._u([{key:"default",fn:function(_){var a=_.row;return[e._v(e._s(e.rowa(a,t.productLineId)))]}}],null,!0)},[e._v(" "),e._l(t.children,function(t){return _("el-table-column",{key:t.productLineId,attrs:{align:"center",prop:"",label:t.productLineName},scopedSlots:e._u([{key:"default",fn:function(_){var a=_.row;return[e._v(e._s(e.rowa(a,t.productLineId)))]}}],null,!0)},[e._v(" "),e._l(t.children,function(t){return _("el-table-column",{key:t.productLineId,attrs:{align:"center",prop:"",label:t.productLineName},scopedSlots:e._u([{key:"default",fn:function(_){var a=_.row;return[e._v(e._s(e.rowa(a,t.productLineId)))]}}],null,!0)})})],2)})],2)})],2)})],2)],1)},staticRenderFns:[]},n=_("VU/8")(a.a,r,!1,null,null,null);t.default=n.exports},tmBP:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__=__webpack_require__("Xxa5"),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__=__webpack_require__("exGp"),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator__),__WEBPACK_IMPORTED_MODULE_2_file_saver__=__webpack_require__("t4zo"),__WEBPACK_IMPORTED_MODULE_2_file_saver___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_file_saver__),__WEBPACK_IMPORTED_MODULE_3_xlsx__=__webpack_require__("uXZL"),__WEBPACK_IMPORTED_MODULE_3_xlsx___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_xlsx__);__webpack_exports__.a={data:function(){return{isexpandall:"",options:[{value:"1",label:"1月"},{value:"2",label:"2月"},{value:"3",label:"3月"},{value:"4",label:"4月"},{value:"5",label:"5月"},{value:"6",label:"6月"},{value:"7",label:"7月"},{value:"8",label:"8月"},{value:"9",label:"9月"},{value:"10",label:"10月"},{value:"11",label:"11月"},{value:"12",label:"12月"}],value:"",aa:11,dapartmentList:[],tableData:[],valueDate:[],startTime:"",endTime:""}},created:function(){this.getkuaijiList(),this.getInOutList()},methods:{roundDate:function(e){e?(this.startTime=e[0],this.endTime=e[1]):(this.startTime="",this.endTime=""),this.getkuaijiList(),this.getInOutList()},exportExcel:function(){var e=document.querySelector("#table").cloneNode(!0);e.removeChild(e.querySelector(".el-table__fixed"));var t=__WEBPACK_IMPORTED_MODULE_3_xlsx___default.a.utils.table_to_book(e,{raw:!0});this.companyReport;this.dataEndDate&&this.dataEndDate;var _=__WEBPACK_IMPORTED_MODULE_3_xlsx___default.a.write(t,{bookType:"xlsx",bookSST:!0,type:"array"});try{__WEBPACK_IMPORTED_MODULE_2_file_saver___default.a.saveAs(new Blob([_],{type:"application/octet-stream"}),"产品线收支表.xlsx")}catch(e){}return _},getkuaijiList:function(){var e=this;return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function t(){var _,a;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("hbte-financial/hbte/accountTitle/getAccountTitleProductLineSum",{params:{startTime:e.startTime,endTime:e.endTime}});case 2:_=t.sent,a=_.data,e.tableData=a.data;case 5:case"end":return t.stop()}},t,e)}))()},getInOutList:function(){var e=this;return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_asyncToGenerator___default()(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.mark(function t(){var _,a;return __WEBPACK_IMPORTED_MODULE_0_babel_runtime_regenerator___default.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("hbte-financial/hbte/productLine/productLineList");case 2:_=t.sent,a=_.data,e.dapartmentList=a.data;case 5:case"end":return t.stop()}},t,e)}))()},formatNumberRgx:function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")},rowa:function rowa(row,id){for(var i=0;i<row.productLines.length;i++)if(row.productLines[i].productLineId===id&&"0.00"!==row.productLines[i].productLineSum){var temp=row.productLines[i].productLineSum;return this.formatNumberRgx(0==eval(temp)?"":eval(temp)+".00")}},countRow:function countRow(countNum){return"0.00"===countNum?"":this.formatNumberRgx(eval(countNum)+""==0?"":eval(countNum)+".00")},queryList:function(e){this.getkuaijiList()}}}}});
//# sourceMappingURL=34.8c0425088b8ec786ad2d.js.map